# videoshop

### 도메인 규칙

1.__비디오가게 주인은 손님들이 빌려간 비디오들의 총 가격을 계산하고 싶어한다.__
<pre>
* 총 가격은 비디오가격을 모두 합한 금액에 할인금액을 차감해서 계산한다.
* 할인의 종류는 회원별 등급과 요일/시간별 타임, 비디오의 출시일등이 있다
* 회원은 골드, 실버, 일반등급으로 나뉘고, 등급별로 각각 총 비디오가격의 10%, 5%, 0%의 할인을 받는다.
* 비디오가게 주인은 특별히 매주 월요일 아침 10시, 토/일요일 저녁 6시부터 1시간동안 각각 총 비디오가격의 3%, 5%를 할인해준다.
* 비디오가게 주인은 출시일이 더 오래된 비디오일수록 대여를 촉진하기 위해, 각 비디오가격의 1년 이상된 것은 3%, 3년이상은 5%, 5년 이상은 8%의 할인을 해준다.
</pre>

2.__비디오가게 주인은 손님들이 빌려간 비디오의 연체가격을 계산하고 싶어한다.__
<pre>
* 반납일로부터 하루가 지나면 총 비디오가격의 5%, 일주일 이상 지나면 10%, 한달 이상 지나면 30%의 연체료를 물린다
</pre>

3.__비디오가게 주인은 손님들의 등급을 자동으로 업데이트 하고 싶다__
<pre>
* 회원은 첫 가입 후, 3년이 지나거나 혹은 10번 이상 대여한 내역이 있다면, 실버등급으로 올라간다.
* 회원은 첫 가입 후, 5년이 지나거나 혹은 20번 이상 대여한 내역이 있다면, 골드등급으로 올라간다.
* 회원은 첫 가입 후 2년이상 지나도록 대여내역이 없다면, 자동탈퇴된다.
</pre>

### Spock Documentation

http://spockframework.org/spock/docs/1.1/index.html

### Other Spock Example Project

1. 숫자야구게임 : https://github.com/bluepoet/baseballgame-tdd-exercise
2. 초간단 spock-dbunit CRUD : https://github.com/bluepoet/spock-dbunit-exercise
3. ddd-start 테스트코드 groovy+spock으로 포팅 : https://github.com/bluepoet/ddd-repeat-start
